(()=>{var u=function(c){[{directive:"request"},{directive:"post",method:"POST"},{directive:"get",method:"GET"}].forEach(t=>{c.directive(t.directive,(e,{expression:s},{evaluate:n,cleanup:i})=>{let o=a(s,n);e.addEventListener("click",()=>{r({el:e,method:t.method,...o})}),i(()=>observer.disconnect())}),c.magic(t.directive,(e,{evaluate:s})=>n=>{let i=a(n,s);r({el:e,...i})})});function r({el:t,method:e,route:s,headers:n,body:i}){console.log({el:t,method:e,route:s,headers:n,body:i}),fetch(s,{method:e??"POST",headers:n,body:i}).then(o=>{t.dispatchEvent(new CustomEvent("request",{state:"success",response:o})),t.dispatchEvent(new CustomEvent((e??"post").toLowerCase(),{state:"success",response:o}))}).catch(o=>{console.warn(o),t.dispatchEvent(new CustomEvent("request",{state:"error",response})),t.dispatchEvent(new CustomEvent((e??"post").toLowerCase(),{state:"error",response}))})}function a(t,e){let s={};return typeof t!="string"?s=t:t.startsWith("{")?s=e(t):s.route=t,s}},d=u;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(d)});})();
