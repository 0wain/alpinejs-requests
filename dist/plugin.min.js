(()=>{var u=function(o){[{directive:"request"},{directive:"post",method:"POST"},{directive:"get",method:"GET"}].forEach(t=>{o.directive(t.directive,(e,{expression:s},{evaluate:n,cleanup:c})=>{let i=d(s,n);e.addEventListener("click",()=>{a({el:e,method:t.method,...i})}),c(()=>observer.disconnect())}),o.magic(t.directive,(e,{evaluate:s})=>n=>{let c=d(n,s);a({el:e,...c})})});function a({el:t,method:e,route:s,headers:n,body:c}){console.log({el:t,method:e,route:s,headers:n,body:c}),fetch(s,{method:e??"POST",headers:n,body:c}).then(i=>{t.dispatchEvent(new CustomEvent("request",{detail:{state:"success",response:i}})),t.dispatchEvent(new CustomEvent((e??"post").toLowerCase(),{detail:{state:"success",response:i}})),console.log({detail:{state:"success",response:i}})}).catch(i=>{console.warn(i),t.dispatchEvent(new CustomEvent("request",{detail:{state:"error",response}})),t.dispatchEvent(new CustomEvent((e??"post").toLowerCase(),{detail:{state:"error",response}}))})}function d(t,e){let s={};return typeof t!="string"?s=t:t.startsWith("{")?s=e(t):s.route=t,s}},r=u;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(r)});})();
